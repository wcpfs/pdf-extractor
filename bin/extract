#!/usr/bin/env ruby
# encoding: utf-8

$LOAD_PATH << File.join(File.dirname(__FILE__), '..', 'lib')

require 'extractor'
require 'json'

if ARGV.length < 1
  STDERR.puts "Usage: extract <pdf file> ..."
  exit 1
end


output_dir = 'pdf_data'
ARGV.each do |pdf_file|
  STDERR.puts "Processing #{pdf_file}"
  extractor = Extractor.new pdf_file, output_dir
  STDERR.puts "Writing chronicle sheet"
  extractor.write_chronicle
  STDERR.puts "Writing images"
  extractor.write_images
  STDERR.puts "Writing statblocks"
  extractor.write_statblocks
  #STDERR.puts "Writing metadata"
  #extractor.write_chronicle
  STDERR.puts "Done"
end
